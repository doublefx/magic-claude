{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "hooks": {
    "UserPromptSubmit": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/inject-prompt-context.cjs\""
          }
        ],
        "description": "Inject dynamic context (branch, tasks, time) into prompts"
      }
    ],
    "PermissionRequest": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/permission-filter.cjs\""
          }
        ],
        "description": "Auto-approve safe bash commands (tests, linting, builds)"
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/pre-commit-review.cjs\""
          }
        ],
        "description": "Suggest code review before git commit (filters for git commit internally)"
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/suggest-compact.cjs\""
          }
        ],
        "description": "Suggest manual compaction at logical intervals"
      },
      {
        "matcher": "mcp__plugin_serena_serena__(?!read_memory|write_memory|list_memories|edit_memory|delete_memory|check_onboarding_performed|onboarding|activate_project|get_current_config|prepare_for_new_conversation|initial_instructions|think_about_collected_information|think_about_task_adherence|think_about_whether_you_are_done).*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/serena-memory-check.cjs\""
          }
        ],
        "description": "[Serena] FORCE memory check before Serena exploration tools (configurable via serena.enabled)"
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/serena-task-check.cjs\""
          }
        ],
        "description": "[Serena] FORCE memory check before Task/Explore agents (configurable via serena.enabled)"
      }
    ],
    "PreCompact": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/pre-compact.cjs\""
          },
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/evaluate-session.cjs\""
          },
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/serena-pre-compact.cjs\""
          }
        ],
        "description": "Save state, evaluate patterns, and preserve Serena memories before compaction"
      }
    ],
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/session-start.cjs\""
          }
        ],
        "description": "Load previous context and detect package manager on new session"
      }
    ],
    "PostToolUse": [
      {
        "matcher": "TaskUpdate",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/post-task-update.cjs\""
          }
        ],
        "description": "Suggest code review when tasks are completed"
      },
      {
        "matcher": "TaskUpdate",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/serena-evaluate-memories.cjs\""
          }
        ],
        "description": "[Serena] Evaluate and update memories on task completion (configurable via serena.enabled)"
      },
      {
        "matcher": "mcp__plugin_serena_serena__(?!read_memory|write_memory|list_memories|edit_memory|delete_memory|check_onboarding_performed|onboarding|activate_project|get_current_config|prepare_for_new_conversation|initial_instructions|think_about_collected_information|think_about_task_adherence|think_about_whether_you_are_done).*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/serena-document-reminder.cjs\""
          }
        ],
        "description": "[Serena] Remind to document findings after Serena exploration (configurable via serena.enabled)"
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/serena-task-reminder.cjs\""
          }
        ],
        "description": "[Serena] Remind to document findings after Task agents (configurable via serena.enabled)"
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/pr-url-logger.cjs\""
          }
        ],
        "description": "Log PR URL and provide review command after PR creation"
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/smart-formatter.js\""
          }
        ],
        "description": "Auto-format files based on project type (Python: ruff, Java: google-java-format, Kotlin: ktfmt, JS/TS: prettier)"
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/java-security.js\""
          }
        ],
        "description": "Run security checks on Java files (filters for .java internally)"
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/typescript-checker.cjs\""
          }
        ],
        "description": "TypeScript check after editing .ts/.tsx files (filters internally)"
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/console-log-detector.cjs\""
          }
        ],
        "description": "Warn about console.log statements after edits (filters for JS/TS internally)"
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/stop-validation.cjs\""
          }
        ],
        "description": "Check for console.log in modified files after each response"
      }
    ],
    "SessionEnd": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/session-end.cjs\""
          }
        ],
        "description": "Persist session state on end"
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/evaluate-session.cjs\""
          }
        ],
        "description": "Evaluate session for extractable patterns"
      }
    ],
    "Notification": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/notify.cjs\""
          }
        ],
        "description": "Cross-platform desktop notification when Claude needs input"
      }
    ],
    "SubagentStart": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/serena-subagent-start.cjs\""
          }
        ],
        "description": "[Serena] Track when exploration subagent starts (for later documentation)"
      }
    ],
    "SubagentStop": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "node \"${CLAUDE_PLUGIN_ROOT}/scripts/hooks/serena-subagent-stop.cjs\""
          }
        ],
        "description": "[Serena] Enforce documentation after exploration agent completes"
      }
    ]
  }
}
