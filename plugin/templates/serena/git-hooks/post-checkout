#!/bin/bash
# Git Hook: post-checkout
# Logs branch switches with SHAs for git-sync agent impact analysis
#
# Arguments:
#   $1 - previous HEAD
#   $2 - new HEAD
#   $3 - 1 if branch checkout, 0 if file checkout

# Only trigger on branch checkout
if [ "$3" = "1" ]; then
  BEFORE="$1"
  AFTER="$2"

  echo "[git-sync] Branch switched. The git-sync agent will analyze impact."

  LOG_FILE=".git/serena-sync-reminder.log"
  echo "$(date -u '+%Y-%m-%d %H:%M:%S UTC') - post-checkout before=${BEFORE} after=${AFTER}" >> "$LOG_FILE"
fi
